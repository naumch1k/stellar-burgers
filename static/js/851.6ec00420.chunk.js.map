{"version":3,"file":"static/js/851.6ec00420.chunk.js","mappings":"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","sources":["webpack://stellar-burgers/./src/components/ErrorMessage/ErrorMessage.module.css?d773","components/ErrorMessage/ErrorMessage.tsx","webpack://stellar-burgers/./src/components/OrderDetailsIngredient/OrderDetailsIngredient.module.css?27b6","components/OrderDetailsIngredient/OrderDetailsIngredient.tsx","webpack://stellar-burgers/./src/components/OrderDetails/OrderDetails.module.css?8291","components/OrderDetails/OrderDetails.tsx","webpack://stellar-burgers/./src/pages/Order/Order.module.css?2b8b","pages/Order/Order.tsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"root\":\"ErrorMessage_root__kSKWw\"};","import { ReactNode } from 'react'\nimport styles from './ErrorMessage.module.css'\n\ninterface IErrorMessageProps {\n  children: ReactNode;\n}\n\nexport const ErrorMessage = ({ children }: IErrorMessageProps) => {\n  return (\n    <p className={`${styles.root} text text_type_main-large text_color_inactive`}>\n      {children}\n    </p>\n  )\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"OrderDetailsIngredient_root__lxFQA\",\"name\":\"OrderDetailsIngredient_name__pRj2p\",\"price\":\"OrderDetailsIngredient_price__9OTmk\"};","import { useParams } from 'react-router'\nimport { CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components'\nimport { IngredientThumbnail } from '../ui/IngredientThumbnail'\nimport { useSelector } from 'react-redux'\nimport { selectIngredientById } from '../../store/ingredients/ingredients.selectors'\nimport { IRootState } from '../../store/store'\nimport useOrderDetails from '../../hooks/useOrderDetails'\nimport styles from './OrderDetailsIngredient.module.css'\n\ninterface IOrderDetailsIngredientProps {\n  id: string;\n}\n\nexport const OrderDetailsIngredient = ({ id }: IOrderDetailsIngredientProps) => {\n  const ingredient = useSelector((state: IRootState) => selectIngredientById(state, id))\n  const { id: orderId } = useParams()\n  const { ingredients } = useOrderDetails(orderId!)\n\n  const getIngredientQty = (id: string) => {\n    let counter = 0\n\n    ingredients.forEach(item => {\n      if (item._id === id) counter += 1\n    })\n\n    return counter\n  }\n\n  return (\n    <li className={styles.root}>\n      <IngredientThumbnail id={ingredient!._id}/>\n      <p className={`${styles.name} text text_type_main-default ml-4`}>\n        {ingredient!.name}\n      </p>\n      <p className={`${styles.price} text text_type_digits-default`}>\n        {getIngredientQty(id)} x {ingredient!.price}\n        {' '}\n        <CurrencyIcon type='primary' />\n      </p>\n    </li>\n  )\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"OrderDetails_container__iJZOV\",\"number\":\"OrderDetails_number__iw1AR\",\"name\":\"OrderDetails_name__+603E\",\"status\":\"OrderDetails_status__3vn0u\",\"list\":\"OrderDetails_list__wT20n\",\"price\":\"OrderDetails_price__+DUOs\",\"footer\":\"OrderDetails_footer__2HJcW\"};","import { useParams } from 'react-router'\nimport { CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components'\nimport { OrderDetailsIngredient } from '../OrderDetailsIngredient'\nimport { FormattedDate } from '../ui/FormattedDate'\nimport useOrderDetails from '../../hooks/useOrderDetails'\nimport styles from './OrderDetails.module.css'\n\nexport const OrderDetails = () => {\n  const { id } = useParams()\n\n  const {\n    number,\n    createdAt,\n    name,\n    status,\n    price,\n    uniqueIngredients,\n  } = useOrderDetails(id!)\n\n  return (\n    <div className={styles.container}>\n      <p className={`${styles.number} text text_type_digits-default`}>#{number}</p>\n      <h3 className={`${styles.name} text text_type_main-medium mt-10`}>{name}</h3>\n      <p className={`\n        ${styles.status}\n        ${status === 'done' ? 'text_color_success' : ''}\n        text text_type_main-default mt-3\n      `}>\n        {status}\n      </p>\n      <ul className={`${styles.list} custom-scroll`}>\n        {uniqueIngredients.map(ingredient => {\n          return (\n            <OrderDetailsIngredient id={ingredient._id} key={ingredient._id}/>\n          )\n        })}\n      </ul>\n      <footer className={`${styles.footer} mt-10`}>\n          <FormattedDate\n            date={createdAt}\n            className='text text_type_main-default text_color_inactive'\n          />\n          <p className={`${styles.price} text text_type_digits-default`}>\n            {price}\n            {' '}\n            <CurrencyIcon type='primary' />\n          </p>\n      </footer>\n    </div>\n  )\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"Order_root__JOTg7\"};","import { useParams } from 'react-router'\nimport { useEffect } from 'react'\nimport { useSelector } from 'react-redux'\nimport {\n  selectIsConnecting,\n  connect,\n  disconnect,\n} from '../../store/webSocket/webSocket.slice'\nimport { selectOrderById } from '../../store/orders/orders.selectors'\nimport { IRootState, useAppDispatch } from '../../store/store'\nimport { WS_BASE_URL } from '../../shared/constants/wsBaseUrl'\nimport { OrderDetails } from '../../components/OrderDetails'\nimport { ErrorMessage } from '../../components/ErrorMessage'\nimport { Loader } from '../../components/Loader'\nimport styles from './Order.module.css'\n\nconst Order = () => {\n  const { id } = useParams()\n  const order = useSelector((state: IRootState) => selectOrderById(state, id!))\n  const dispatch = useAppDispatch()\n  const isConnecting = useSelector(selectIsConnecting)\n\n  // TODO: refactor to helper func\n  const accessToken = localStorage.getItem('accessToken')?.split('Bearer ')[1]\n\n  useEffect(() => {\n    dispatch(connect(`${WS_BASE_URL}?token=${accessToken}`))\n\n    return () => {\n      dispatch(disconnect())\n    }\n  }, [])\n\n  if (isConnecting) return <Loader/>\n\n  return (\n    <div className={styles.root}>\n      {order ? (\n        <OrderDetails/>\n      ) : (\n        <ErrorMessage>\n          <span>Looks like this order launched into deep space ðŸš€</span>\n          <span>No trace found...</span>\n        </ErrorMessage>\n      )}\n    </div>\n  )\n}\n\nexport default Order\n"],"names":["ErrorMessage","_ref","children","_jsx","className","concat","styles","OrderDetailsIngredient","id","ingredient","useSelector","state","selectIngredientById","orderId","useParams","ingredients","useOrderDetails","_jsxs","IngredientThumbnail","_id","name","counter","forEach","item","getIngredientQty","price","CurrencyIcon","type","OrderDetails","number","createdAt","status","uniqueIngredients","map","FormattedDate","date","Order","_localStorage$getItem","order","selectOrderById","dispatch","useAppDispatch","isConnecting","selectIsConnecting","accessToken","localStorage","getItem","split","useEffect","connect","WS_BASE_URL","disconnect","Loader"],"sourceRoot":""}