"use strict";(self.webpackChunkstellar_burgers=self.webpackChunkstellar_burgers||[]).push([[569],{7900:(e,t,s)=>{s.r(t),s.d(t,{default:()=>be});var r=s(5287),n=s(6401),c=s(2791),a=s(335),i=s(9434),l=s(7963),o=s(1067),d=s(6814);const m="Modal_root__z7+I3",u="Modal_isOpen__zYv3o",_="Modal_container__Ha+Ky",p="Modal_closeButton__Ya+Ev";var x=s(184);const g=e=>{const{isOpen:t,onClose:s,onBackdropClick:r,children:n}=e;return(0,x.jsx)("div",{className:"".concat(m," ").concat(t?"".concat(u):""),onClick:r,children:(0,x.jsxs)("div",{className:_,children:[n,(0,x.jsx)("button",{className:p,type:"button","aria-label":"Close modal",onClick:s,children:(0,x.jsx)(d.Tw,{type:"primary"})})]})})},j="NutritionFacts_root__RjsFs",h="NutritionFacts_heading__3ISmc",b="NutritionFacts_image__p-fix",N="NutritionFacts_list__on7pF",v="NutritionFacts_listItem__ffIlj",y=e=>{const{name:t,calories:s,carbohydrates:r,fat:n,proteins:c,image_large:a}=e,i="mb-2 text text_type_main-default text_color_inactive",l="mb-2 text text_type_digits-default text_color_inactive";return(0,x.jsxs)("div",{className:"".concat(j," pt-10 pr-10 pb-15 pl-10"),children:[(0,x.jsx)("h2",{className:"".concat(h," mt-4 mb-4 text text_type_main-large"),children:"Nutrition Facts"}),(0,x.jsx)("img",{className:b,src:a,alt:t}),(0,x.jsx)("p",{className:"mt-4 mb-8 text text_type_main-medium",children:t}),(0,x.jsxs)("dl",{className:N,children:[(0,x.jsxs)("div",{className:v,children:[(0,x.jsx)("dt",{className:i,children:"Calories"}),(0,x.jsx)("dd",{className:l,children:s})]}),(0,x.jsxs)("div",{className:v,children:[(0,x.jsx)("dt",{className:i,children:"Total Carb."}),(0,x.jsx)("dd",{className:l,children:r})]}),(0,x.jsxs)("div",{className:v,children:[(0,x.jsx)("dt",{className:i,children:"Total Fat"}),(0,x.jsx)("dd",{className:l,children:n})]}),(0,x.jsxs)("div",{className:v,children:[(0,x.jsx)("dt",{className:i,children:"Protein"}),(0,x.jsx)("dd",{className:l,children:c})]})]})]})};var f=s(7021),C=s(6916);const B=(0,C.P1)((e=>e.burgerConstructor.fillings),(e=>Object.values(e))),I=e=>e.burgerConstructor.bun,k=(0,C.P1)([e=>[e.burgerConstructor.bun,...e.burgerConstructor.fillings],(e,t)=>t],((e,t)=>e.reduce(((e,s)=>(null===s||void 0===s?void 0:s._id)===t?e+("bun"===s.type?2:1):e),0)));var M=s(9215),O=s(3052),R=s(1042);const S=()=>{const e=(0,M.TL)(),[t,s]=(0,c.useState)(!1),r=()=>s(!1);return{isModalOpen:t,openModal:()=>s(!0),closeModal:r,closeByBackdropClick:e=>{e.target===e.currentTarget&&s(!1)},closeOrderConfirmationModal:()=>{e((0,R.Q)()),e((0,O.R5)()),r()}}},F="Ingredient_root__Zh74E",L="Ingredient_beingDragged__pJKPQ",T="Ingredient_name__bUorL",P="Ingredient_price__CIEQs",U=e=>{let{id:t}=e;const s=(0,i.v9)((e=>(0,f.Vt)(e,t))),{name:r,image:n,price:c}=s,a=(0,i.v9)((e=>k(e,t))),{isModalOpen:l,openModal:m,closeModal:u,closeByBackdropClick:_}=S(),[{beingDragged:p},j]=(0,o.c)({type:"ingredient",item:s,collect:e=>({beingDragged:e.isDragging()})});return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("li",{ref:j,className:"".concat(F," ").concat(p?"".concat(L):""),onClick:m,children:[(0,x.jsx)("img",{className:"mr-4 ml-4",src:n,alt:r}),(0,x.jsxs)("div",{className:"pt-2",children:[(0,x.jsxs)("p",{className:"".concat(P," text text_type_digits-default"),children:[(0,x.jsx)("span",{className:"mr-2",children:c}),(0,x.jsx)(d.rm,{type:"primary"})]}),(0,x.jsx)("p",{className:"".concat(T," text text_type_main-default mt-2"),children:r})]}),a>0&&(0,x.jsx)(d.AT,{count:a,size:"default"})]}),l&&(0,x.jsx)(g,{isOpen:l,onClose:u,onBackdropClick:_,children:(0,x.jsx)(y,{...s})})]})},w="IngredientList_root__1m0nr",D=e=>{let{ingredientIds:t}=e;return(0,x.jsx)("ul",{className:"".concat(w," pr-4 pb-10 pl-4"),children:t.map((e=>(0,x.jsx)(U,{id:e},e)))})},G="IngredientGroup_name__h7cBm",z=(0,c.forwardRef)(((e,t)=>{let{type:s}=e;const r=(0,i.v9)(f.pT),n=(0,i.v9)((e=>(0,f.e2)(e,s)));return r?(0,x.jsx)(l.a,{}):(0,x.jsxs)("li",{children:[(0,x.jsx)("h2",{ref:t,className:"".concat(G," text text_type_main-medium mb-6"),children:s}),(0,x.jsx)(D,{ingredientIds:n})]})})),E={BUNS:"BUNS",BURGERS:"BURGERS",TOPPINGS:"TOPPINGS"},H=e=>{if(0===e.length)return e;const t=e.toLowerCase();return t.charAt(0).toUpperCase()+t.slice(1)},Y="BurgerIngredients_tabBar__jn4fI",A="BurgerIngredients_menu__X3WWl",{BUNS:K,BURGERS:Q,TOPPINGS:W}=E,J=()=>{const[e,t]=(0,c.useState)(E.BUNS),s=(0,c.useRef)(null),r=(0,c.useRef)(null),n=(0,c.useRef)(null),i=(0,c.useRef)(null),l=e=>{e.current&&e.current.scrollIntoView({behavior:"smooth"})},o=e=>{switch(e){case K:l(r);break;case Q:l(n);break;case W:l(i)}};return(0,x.jsxs)("section",{className:"mt-10",children:[(0,x.jsx)("h1",{className:"text text_type_main-large",children:"Build Your Own Burger"}),(0,x.jsx)("ul",{className:"".concat(Y," mt-5"),children:Object.keys(E).map((t=>(0,x.jsx)("li",{children:(0,x.jsx)(a.Tab,{active:e===t,value:t,onClick:o,children:H(t)})},t)))}),(0,x.jsxs)("ul",{className:"".concat(A," custom-scroll"),ref:s,onScroll:()=>{var e;const c=null===(e=s.current)||void 0===e?void 0:e.getBoundingClientRect().y,a=Math.abs(r.current.getBoundingClientRect().y-c),l=Math.abs(n.current.getBoundingClientRect().y-c),o=Math.abs(i.current.getBoundingClientRect().y-c);a<l&&a<o&&t(K),l<a&&l<o&&t(Q),o<a&&o<l&&t(W)},children:[(0,x.jsx)(z,{type:"bun",ref:r}),(0,x.jsx)(z,{type:"burger",ref:n}),(0,x.jsx)(z,{type:"topping",ref:i})]})]})};var V=s(8422);const Z="BunElement_root__P2lJ4",X=e=>{let{type:t}=e;const s=(0,i.v9)(I);return(0,x.jsx)("div",{className:"".concat(Z," ml-8 pr-4"),children:(0,x.jsx)(d.DY,{type:t,text:s?"".concat(s.name," ").concat("top"===t?"(top)":"(bottom)"):"Choose your bun",price:s?s.price:0,thumbnail:s?s.image:"https://stellarburgers.nomoreparties.site/static/media/loading.89540200.svg",isLocked:!0})})};var q=s(2942);const $="FillingListItem_root__Kz4P+",ee="FillingListItem_isHovered__6iFKh",te=e=>{let{index:t,ingredient:s}=e;const r=(0,M.TL)(),{name:n,price:a,image:i}=s,[,l]=(0,o.c)({type:"addedIngredient",item:()=>({index:t})}),[{isHovered:m},u]=(0,V.L)({accept:"addedIngredient",collect:e=>({isHovered:e.isOver()}),drop:e=>{e.index!==t&&r((0,O.Dk)({fromIndex:e.index,toIndex:t}))}}),_=(0,c.useRef)(null);return l(u(_)),(0,x.jsxs)("li",{ref:_,className:"".concat($," ").concat(m?"".concat(ee):""," mt-4 mb-4"),children:[(0,x.jsx)(q.DragIcon,{type:"primary"}),(0,x.jsx)(d.DY,{text:n,thumbnail:i,price:a,handleClose:()=>r((0,O.sr)(t))})]})},se="FillingList_root__CWjeS",re=()=>{const e=(0,i.v9)(B);return(0,x.jsx)("ul",{className:"".concat(se," custom-scroll"),children:e.map(((e,t)=>(0,x.jsx)(te,{index:t,ingredient:e},e._id)))})};var ne=s(4865);const ce=e=>e.order,ae=e=>e.order.number,ie=s.p+"static/media/success.ffd5c56d9db3cece5522.png",le="OrderConfirmation_root__25rwU",oe="OrderConfirmation_orderNumber__h5AyN",de=()=>{const e=(0,i.v9)(ae);return(0,x.jsxs)("div",{className:"".concat(le," pt-25 pr-10 pb-25 pl-10"),children:[(0,x.jsx)("span",{className:"mb-8 text text_type_main-medium",children:"Your order number is"}),(0,x.jsx)("h2",{className:"".concat(oe," text text_type_digits-large"),children:e}),(0,x.jsx)("img",{className:"mt-15 mb-15",src:ie,alt:"Success icon"}),(0,x.jsx)("p",{className:"mb-2 text text_type_main-default",children:"your order is being prepared"}),(0,x.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"be ready to pick it up at the orbital station"})]})};var me=s(609);const ue="SubmitGroup_root__OQ4Lo",_e="SubmitGroup_button__68UXa",pe=()=>{const e=(0,M.TL)(),{isFetching:t}=(0,i.v9)(ce),s=(0,i.v9)(I),r=(0,i.v9)(B),{isModalOpen:n,openModal:a,closeOrderConfirmationModal:o}=S(),m=(0,c.useMemo)((()=>s?2*s.price:0),[s])+(0,c.useMemo)((()=>r.reduce(((e,t)=>e+t.price),0)),[r]);return(0,x.jsx)(x.Fragment,{children:(0,x.jsxs)("div",{className:"".concat(ue," mt-10 pr-4 pl-4"),children:[(0,x.jsxs)("span",{className:"text text_type_digits-medium mr-10",children:[m," ",(0,x.jsx)(d.rm,{type:"primary"})]}),(0,x.jsxs)("div",{className:_e,children:[(0,x.jsx)(ne.z,{type:"button",view:"primary",size:"large",onClick:()=>{if(s&&r.length){const t=[s,...r,s].map((e=>e._id));e((0,me.D)({ingredients:t})).then((()=>a()))}},disabled:!s||!r.length,children:"Place an order"}),t&&(0,x.jsx)(l.a,{})]}),n&&(0,x.jsx)(g,{isOpen:n,onClose:o,onBackdropClick:o,children:(0,x.jsx)(de,{})})]})})},xe="BurgerConstructor_root__fVIgZ",ge="BurgerConstructor_isHovered__i8Ijv",je=()=>{const e=(0,M.TL)(),[{isHovered:t},s]=(0,V.L)({accept:"ingredient",collect:e=>({isHovered:e.isOver()}),drop:e=>{r(e)}}),r=t=>{"bun"===t.type?e((0,O.zL)(t)):e((0,O.TZ)(t))};return(0,x.jsxs)("section",{className:"".concat(xe," pt-25 pb-10"),children:[(0,x.jsxs)("div",{ref:s,className:t?"".concat(ge):"",children:[(0,x.jsx)(X,{type:"top"}),(0,x.jsx)(re,{}),(0,x.jsx)(X,{type:"bottom"})]}),(0,x.jsx)(pe,{})]})},he="BurgerBuilder_root__M-A1J",be=()=>(0,x.jsx)("div",{className:he,children:(0,x.jsxs)(r.W,{backend:n.PD,children:[(0,x.jsx)(J,{}),(0,x.jsx)(je,{})]})})}}]);
//# sourceMappingURL=569.aeb2d0fe.chunk.js.map