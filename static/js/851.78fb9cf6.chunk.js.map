{"version":3,"file":"static/js/851.78fb9cf6.chunk.js","mappings":"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","sources":["webpack://stellar-burgers/./src/components/ErrorMessage/ErrorMessage.module.css?d773","components/ErrorMessage/ErrorMessage.tsx","webpack://stellar-burgers/./src/components/OrderDetailsIngredient/OrderDetailsIngredient.module.css?27b6","components/OrderDetailsIngredient/OrderDetailsIngredient.tsx","webpack://stellar-burgers/./src/components/OrderDetails/OrderDetails.module.css?8291","components/OrderDetails/OrderDetails.tsx","webpack://stellar-burgers/./src/pages/Order/Order.module.css?2b8b","pages/Order/index.ts","pages/Order/Order.tsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"root\":\"ErrorMessage_root__kSKWw\"};","import { ReactNode } from 'react'\nimport styles from './ErrorMessage.module.css'\n\ninterface IErrorMessageProps {\n  children: ReactNode;\n}\n\nexport const ErrorMessage = ({ children }: IErrorMessageProps) => {\n  return (\n    <p className={`${styles.root} text text_type_main-large text_color_inactive`}>\n      {children}\n    </p>\n  )\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"OrderDetailsIngredient_root__lxFQA\",\"name\":\"OrderDetailsIngredient_name__pRj2p\",\"price\":\"OrderDetailsIngredient_price__9OTmk\"};","import { useParams } from 'react-router'\nimport { CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components'\nimport { IngredientThumbnail } from '../ui/IngredientThumbnail'\nimport { useSelector } from 'react-redux'\nimport { selectIngredientById } from '../../store/ingredients/selectors'\nimport { IRootState } from '../../store/store'\nimport useOrderDetails from '../../hooks/useOrderDetails'\nimport styles from './OrderDetailsIngredient.module.css'\n\ninterface IOrderDetailsIngredientProps {\n  id: string;\n}\n\nexport const OrderDetailsIngredient = ({ id }: IOrderDetailsIngredientProps) => {\n  const ingredient = useSelector((state: IRootState) => selectIngredientById(state, id))\n  const { id: orderId } = useParams()\n  const { ingredients } = useOrderDetails(orderId!)\n\n  const getIngredientQty = (id: string) => {\n    let counter = 0\n\n    ingredients.forEach(item => {\n      if (item._id === id) counter += 1\n    })\n\n    return counter\n  }\n\n  return (\n    <li className={styles.root}>\n      <IngredientThumbnail id={ingredient!._id}/>\n      <p className={`${styles.name} text text_type_main-default ml-4`}>\n        {ingredient!.name}\n      </p>\n      <p className={`${styles.price} text text_type_digits-default`}>\n        {getIngredientQty(id)} x {ingredient!.price}\n        {' '}\n        <CurrencyIcon type='primary' />\n      </p>\n    </li>\n  )\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"OrderDetails_container__iJZOV\",\"number\":\"OrderDetails_number__iw1AR\",\"status\":\"OrderDetails_status__3vn0u\",\"list\":\"OrderDetails_list__wT20n\",\"price\":\"OrderDetails_price__+DUOs\",\"footer\":\"OrderDetails_footer__2HJcW\"};","import { useParams } from 'react-router'\nimport { CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components'\nimport { OrderDetailsIngredient } from '../OrderDetailsIngredient'\nimport { FormattedDate } from '../ui/FormattedDate'\nimport useOrderDetails from '../../hooks/useOrderDetails'\nimport styles from './OrderDetails.module.css'\n\nexport const OrderDetails = () => {\n  const { id } = useParams()\n\n  const {\n    number,\n    createdAt,\n    name,\n    status,\n    price,\n    uniqueIngredients,\n  } = useOrderDetails(id!)\n\n  return (\n    <div className={styles.container}>\n      <p className={`${styles.number} text text_type_digits-default`}>#{number}</p>\n      <h3 className='text text_type_main-medium mt-10'>{name}</h3>\n      <p className={`\n        ${styles.status}\n        ${status === 'done' ? 'text_color_success' : ''}\n        text text_type_main-default mt-3\n      `}>\n        {status}\n      </p>\n      <ul className={`${styles.list} custom-scroll`}>\n        {uniqueIngredients.map((ingredient, i) => {\n          return (\n            <OrderDetailsIngredient id={ingredient._id} key={i}/>\n          )\n        })}\n      </ul>\n      <footer className={`${styles.footer} mt-10`}>\n          <FormattedDate\n            date={createdAt}\n            className='text text_type_main-default text_color_inactive'\n          />\n          <p className={`${styles.price} text text_type_digits-default`}>\n            {price}\n            {' '}\n            <CurrencyIcon type='primary' />\n          </p>\n      </footer>\n    </div>\n  )\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"Order_root__JOTg7\"};","import Order from './Order'\n\nexport default Order\n","import { useParams } from 'react-router'\nimport { useEffect } from 'react'\nimport { useSelector } from 'react-redux'\nimport { selectIsConnecting } from '../../store/web-socket/selectors'\nimport { selectOrderById } from '../../store/orders/selectors'\nimport { useAppDispatch } from '../../store/store'\nimport { connect, disconnect } from '../../store/web-socket/operations'\nimport { WS_BASE_URL } from '../../shared/constants/ws-base-url'\nimport { IRootState } from '../../store/store'\nimport { OrderDetails } from '../../components/OrderDetails'\nimport { ErrorMessage } from '../../components/ErrorMessage'\nimport { Loader } from '../../components/Loader'\nimport styles from './Order.module.css'\n\nconst Order = () => {\n  const { id } = useParams()\n\n  console.log('@ Order')\n  \n  const order = useSelector((state: IRootState) => selectOrderById(state, id!))\n  const dispatch = useAppDispatch()\n  const isConnecting = useSelector(selectIsConnecting)\n\n  // TODO: refactor to helper func\n  const accessToken = localStorage.getItem('accessToken')?.split('Bearer ')[1]\n\n  useEffect(() => {\n    dispatch(connect(`${WS_BASE_URL}?token=${accessToken}`))\n\n    return () => {\n      dispatch(disconnect())\n    }\n  }, [])\n\n  if (isConnecting) return <Loader/>\n\n  return (\n    <div className={styles.root}>\n      {order ? (\n        <OrderDetails/>\n      ) : (\n        <ErrorMessage>\n          Looks like this order launched into deep space ðŸš€\n          <br/>\n          <br/>\n          No trace found\n        </ErrorMessage>\n      )}\n    </div>\n  )\n}\n\nexport default Order\n"],"names":["ErrorMessage","_ref","children","_jsx","className","concat","styles","OrderDetailsIngredient","id","ingredient","useSelector","state","selectIngredientById","orderId","useParams","ingredients","useOrderDetails","_jsxs","IngredientThumbnail","_id","name","counter","forEach","item","getIngredientQty","price","CurrencyIcon","type","OrderDetails","_useOrderDetails","number","createdAt","status","uniqueIngredients","map","i","FormattedDate","date","_localStorage$getItem","console","log","order","selectOrderById","dispatch","useAppDispatch","isConnecting","selectIsConnecting","accessToken","localStorage","getItem","split","useEffect","connect","WS_BASE_URL","disconnect","Loader"],"sourceRoot":""}