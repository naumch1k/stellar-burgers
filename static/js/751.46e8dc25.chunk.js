"use strict";(self.webpackChunkstellar_burgers=self.webpackChunkstellar_burgers||[]).push([[751],{2263:(e,t,r)=>{r.d(t,{B:()=>c});const s="ErrorMessage_root__kSKWw";var n=r(184);const c=e=>{let{children:t}=e;return(0,n.jsx)("p",{className:"".concat(s," text text_type_main-large text_color_inactive"),children:t})}},7244:(e,t,r)=>{r.r(t),r.d(t,{default:()=>Ce});var s=r(5287),n=r(6401),c=r(2791),a=r(335),i=r(9434),l=r(7963),o=r(1067),d=r(6814),u=r(1987),m=r(7021),p=r(6916);const x=(0,p.P1)((e=>e.burgerConstructor.fillings),(e=>Object.values(e))),_=e=>e.burgerConstructor.bun,g=(0,p.P1)([e=>[e.burgerConstructor.bun,...e.burgerConstructor.fillings],(e,t)=>t],((e,t)=>e.reduce(((e,r)=>(null===r||void 0===r?void 0:r._id)===t?e+("bun"===r.type?2:1):e),0)));var j=r(4236);const h="Ingredient_root__Zh74E",b="Ingredient_beingDragged__pJKPQ",v="Ingredient_name__bUorL",N="Ingredient_price__CIEQs";var y=r(184);const C=e=>{let{id:t}=e;const r=(0,u.TL)(),s=(0,i.v9)((e=>(0,m.Vt)(e,t))),{name:n,image:c,price:a}=s,l=(0,i.v9)((e=>g(e,t))),[{beingDragged:p},x]=(0,o.c)({type:"ingredient",item:s,collect:e=>({beingDragged:e.isDragging()})});return(0,y.jsx)(y.Fragment,{children:(0,y.jsxs)("li",{ref:x,className:"".concat(h," ").concat(p?"".concat(b):""),onClick:()=>(e=>r((0,j.Up)(e)))(t),children:[(0,y.jsx)("img",{className:"mr-4 ml-4",src:c,alt:n}),(0,y.jsxs)("div",{className:"pt-2",children:[(0,y.jsxs)("p",{className:"".concat(N," text text_type_digits-default"),children:[(0,y.jsx)("span",{className:"mr-2",children:a}),(0,y.jsx)(d.rm,{type:"primary"})]}),(0,y.jsx)("p",{className:"".concat(v," text text_type_main-default mt-2"),children:n})]}),l>0&&(0,y.jsx)(d.AT,{count:l,size:"default"})]})})},f="IngredientList_root__1m0nr",k=e=>{let{ingredientIds:t}=e;return(0,y.jsx)("ul",{className:"".concat(f," pr-4 pb-10 pl-4"),children:t.map((e=>(0,y.jsx)(C,{id:e},e)))})},B="IngredientGroup_name__h7cBm",I=(0,c.forwardRef)(((e,t)=>{let{type:r}=e;const s=(0,i.v9)(m.pT),n=(0,i.v9)((e=>(0,m.e2)(e,r)));return s?(0,y.jsx)(l.a,{}):(0,y.jsxs)("li",{children:[(0,y.jsx)("h2",{ref:t,className:"".concat(B," text text_type_main-medium mb-6"),children:r}),(0,y.jsx)(k,{ingredientIds:n})]})})),M={BUNS:"BUNS",BURGERS:"BURGERS",TOPPINGS:"TOPPINGS"};var O=r(4164);const E="Modal_root__z7+I3",S="Modal_isOpen__zYv3o",L="Modal_container__Ha+Ky",T="Modal_closeButton__Ya+Ev",F=e=>{let{isOpen:t,onClose:r,onBackdropClick:s,children:n}=e;return(0,O.createPortal)((0,y.jsx)("div",{className:"".concat(E," ").concat(t?"".concat(S):""),onClick:s,children:(0,y.jsxs)("div",{className:"".concat(L," pt-25 pr-10 pb-25 pl-10"),children:[n,(0,y.jsx)("button",{className:T,type:"button","aria-label":"Close modal",onClick:r,children:(0,y.jsx)(d.Tw,{type:"primary"})})]})}),document.querySelector(".portal"))},w="NutritionFacts_root__RjsFs",R="NutritionFacts_image__p-fix",P="NutritionFacts_list__on7pF",U="NutritionFacts_listItem__ffIlj",D=e=>{let{ingredientId:t}=e;const r=(0,i.v9)((e=>(0,m.Vt)(e,t))),{name:s,calories:n,carbohydrates:c,fat:a,proteins:l,image_large:o}=r,d="mb-2 text text_type_main-default text_color_inactive",u="mb-2 text text_type_digits-default text_color_inactive";return(0,y.jsxs)("div",{className:w,children:[(0,y.jsx)("h2",{className:"text text_type_main-large",children:"Nutrition Facts"}),(0,y.jsx)("img",{className:"".concat(R," mt-4"),src:o,alt:s}),(0,y.jsx)("p",{className:"mt-4 text text_type_main-medium",children:s}),(0,y.jsxs)("dl",{className:P,children:[(0,y.jsxs)("div",{className:U,children:[(0,y.jsx)("dt",{className:d,children:"Calories"}),(0,y.jsx)("dd",{className:u,children:n})]}),(0,y.jsxs)("div",{className:U,children:[(0,y.jsx)("dt",{className:d,children:"Total Carb."}),(0,y.jsx)("dd",{className:u,children:c})]}),(0,y.jsxs)("div",{className:U,children:[(0,y.jsx)("dt",{className:d,children:"Total Fat"}),(0,y.jsx)("dd",{className:u,children:a})]}),(0,y.jsxs)("div",{className:U,children:[(0,y.jsx)("dt",{className:d,children:"Protein"}),(0,y.jsx)("dd",{className:u,children:l})]})]})]})},G=()=>{const{isModalOpen:e,previewedIngredientId:t,closeModal:r,closeByBackdropClick:s}=(()=>{const e=(0,u.TL)(),[t,r]=(0,c.useState)(!1),s=(0,i.v9)(m.Ec),n=(0,c.useCallback)((()=>{r(!0)}),[]),a=(0,c.useCallback)((()=>{e((0,j.ni)()),r(!1)}),[e]),l=(0,c.useCallback)((e=>{e instanceof KeyboardEvent&&"Escape"===e.code&&a()}),[a]);return(0,c.useEffect)((()=>{s&&n()}),[s,n]),(0,c.useEffect)((()=>(t&&document.addEventListener("keydown",l),()=>document.removeEventListener("keydown",l))),[l,t]),{isModalOpen:t,previewedIngredientId:s,openModal:n,closeModal:a,closeByBackdropClick:e=>{e.target===e.currentTarget&&a()}}})();return t?(0,y.jsx)(F,{isOpen:e,onClose:r,onBackdropClick:s,children:(0,y.jsx)(D,{ingredientId:t})}):null},H=e=>{if(0===e.length)return e;const t=e.toLowerCase();return t.charAt(0).toUpperCase()+t.slice(1)},Y="BurgerIngredients_tabBar__jn4fI",K="BurgerIngredients_menu__X3WWl",{BUNS:z,BURGERS:V,TOPPINGS:W}=M,q=()=>{const[e,t]=(0,c.useState)(M.BUNS),r=(0,c.useRef)(null),s=(0,c.useRef)(null),n=(0,c.useRef)(null),i=(0,c.useRef)(null),l=e=>{e.current&&e.current.scrollIntoView({behavior:"smooth"})},o=e=>{switch(e){case z:l(s);break;case V:l(n);break;case W:l(i)}};return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("section",{className:"mt-10",children:[(0,y.jsx)("h1",{className:"text text_type_main-large",children:"Build Your Own Burger"}),(0,y.jsx)("ul",{className:"".concat(Y," mt-5"),children:Object.keys(M).map((t=>(0,y.jsx)("li",{children:(0,y.jsx)(a.Tab,{active:e===t,value:t,onClick:o,children:H(t)})},t)))}),(0,y.jsxs)("ul",{className:"".concat(K," custom-scroll"),ref:r,onScroll:()=>{var e;const c=null===(e=r.current)||void 0===e?void 0:e.getBoundingClientRect().y,a=Math.abs(s.current.getBoundingClientRect().y-c),l=Math.abs(n.current.getBoundingClientRect().y-c),o=Math.abs(i.current.getBoundingClientRect().y-c);a<l&&a<o&&t(z),l<a&&l<o&&t(V),o<a&&o<l&&t(W)},children:[(0,y.jsx)(I,{type:"bun",ref:s}),(0,y.jsx)(I,{type:"burger",ref:n}),(0,y.jsx)(I,{type:"topping",ref:i})]})]}),(0,y.jsx)(G,{})]})};var A=r(8422);const J="BunElement_root__P2lJ4",Q=e=>{let{type:t}=e;const r=(0,i.v9)(_);return(0,y.jsx)("div",{className:"".concat(J," ml-8 pr-4"),children:(0,y.jsx)(d.DY,{type:t,text:r?"".concat(r.name," ").concat("top"===t?"(top)":"(bottom)"):"Choose your bun",price:r?r.price:0,thumbnail:r?r.image:"https://stellarburgers.nomoreparties.site/static/media/loading.89540200.svg",isLocked:!0})})};var X=r(2942),Z=r(3052);const $="FillingListItem_root__Kz4P+",ee="FillingListItem_isHovered__6iFKh",te=e=>{let{index:t,ingredient:r}=e;const s=(0,u.TL)(),{name:n,price:a,image:i}=r,[,l]=(0,o.c)({type:"addedIngredient",item:()=>({index:t})}),[{isHovered:m},p]=(0,A.L)({accept:"addedIngredient",collect:e=>({isHovered:e.isOver()}),drop:e=>{e.index!==t&&s((0,Z.CI)({fromIndex:e.index,toIndex:t}))}}),x=(0,c.useRef)(null);return l(p(x)),(0,y.jsxs)("li",{ref:x,className:"".concat($," ").concat(m?"".concat(ee):""," mt-4 mb-4"),children:[(0,y.jsx)(X.DragIcon,{type:"primary"}),(0,y.jsx)(d.DY,{text:n,thumbnail:i,price:a,handleClose:()=>s((0,Z.HF)(t))})]})},re="FillingList_root__CWjeS",se=()=>{const e=(0,i.v9)(x);return(0,y.jsx)("ul",{className:"".concat(re," custom-scroll"),children:e.map(((e,t)=>(0,y.jsx)(te,{index:t,ingredient:e},e._id)))})};var ne=r(4865);const ce=r.p+"static/media/success.ffd5c56d9db3cece5522.png",ae="OrderConfirmation_root__Y5Pjh",ie="OrderConfirmation_orderNumber__F7HYV",le=e=>{let{orderNumber:t}=e;return(0,y.jsxs)("div",{className:ae,children:[(0,y.jsx)("span",{className:"mb-8 text text_type_main-medium",children:"Your order number is"}),(0,y.jsx)("h2",{className:"".concat(ie," text text_type_digits-large"),children:t}),(0,y.jsx)("img",{className:"mt-15 mb-15",src:ce,alt:"Success icon"}),(0,y.jsx)("p",{className:"mb-2 text text_type_main-default",children:"your order is being prepared"}),(0,y.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"be ready to pick it up at the orbital station"})]})},oe=e=>e.order,de=e=>e.order.number;var ue=r(1042);const me=()=>{const{isModalOpen:e,closeModal:t,closeByBackdropClick:r,orderNumber:s}=(()=>{const e=(0,u.TL)(),[t,r]=(0,c.useState)(!1),s=(0,i.v9)(de),n=(0,c.useCallback)((()=>{r(!0)}),[]),a=(0,c.useCallback)((()=>{e((0,ue.qm)()),e((0,Z.VS)()),r(!1)}),[e]),l=(0,c.useCallback)((e=>{e instanceof KeyboardEvent&&"Escape"===e.code&&a()}),[a]);return(0,c.useEffect)((()=>{s&&n()}),[s,n]),(0,c.useEffect)((()=>(t&&document.addEventListener("keydown",l),()=>document.removeEventListener("keydown",l))),[l,t]),{isModalOpen:t,orderNumber:s,openModal:n,closeModal:a,closeByBackdropClick:e=>{e.target===e.currentTarget&&a()}}})();return s?(0,y.jsx)(F,{isOpen:e,onClose:t,onBackdropClick:r,children:(0,y.jsx)(le,{orderNumber:s})}):null};var pe=r(2263);const xe=e=>{let{isOpen:t,onClose:r,onBackdropClick:s,errorText:n}=e;return(0,y.jsx)(F,{isOpen:t,onClose:r,onBackdropClick:s,children:(0,y.jsx)(pe.B,{children:n})})};var _e=r(609);const ge="SubmitGroup_root__OQ4Lo",je="SubmitGroup_button__68UXa",he=()=>{const e=(0,u.TL)(),{isFetching:t,error:r}=(0,i.v9)(oe),s=(0,i.v9)(_),n=(0,i.v9)(x),{isModalOpen:a,openModal:o,closeOrderErrorModal:m}=(()=>{const e=(0,u.TL)(),[t,r]=(0,c.useState)(!1),s=()=>r(!1);return{isModalOpen:t,openModal:()=>r(!0),closeModal:s,closeByBackdropClick:e=>{e.target===e.currentTarget&&r(!1)},closeOrderErrorModal:()=>{e((0,ue.fw)()),s()}}})(),p=(0,c.useMemo)((()=>s?2*s.price:0),[s])+(0,c.useMemo)((()=>n.reduce(((e,t)=>e+t.price),0)),[n]);return(0,y.jsx)(y.Fragment,{children:(0,y.jsxs)("div",{className:"".concat(ge," mt-10 pr-4 pl-4"),children:[(0,y.jsxs)("span",{className:"text text_type_digits-medium mr-10",children:[p," ",(0,y.jsx)(d.rm,{type:"primary"})]}),(0,y.jsxs)("div",{className:je,children:[(0,y.jsx)(ne.z,{type:"button",view:"primary",size:"large",onClick:()=>{if(s&&n.length){const t=[s,...n,s].map((e=>e._id));e((0,_e.D)({ingredients:t})).then((()=>o()))}},disabled:!s||!n.length,children:"Place an order"}),t&&(0,y.jsx)(l.a,{})]}),(0,y.jsx)(me,{}),r&&(0,y.jsx)(xe,{isOpen:a,onClose:m,onBackdropClick:m,errorText:r})]})})},be="BurgerConstructor_root__fVIgZ",ve="BurgerConstructor_isHovered__i8Ijv",Ne=()=>{const e=(0,u.TL)(),[{isHovered:t},r]=(0,A.L)({accept:"ingredient",collect:e=>({isHovered:e.isOver()}),drop:e=>{s(e)}}),s=t=>{"bun"===t.type?e((0,Z.Xq)(t)):e((0,Z.Ee)(t))};return(0,y.jsxs)("section",{className:"".concat(be," pt-25 pb-10"),children:[(0,y.jsxs)("div",{ref:r,className:t?"".concat(ve):"",children:[(0,y.jsx)(Q,{type:"top"}),(0,y.jsx)(se,{}),(0,y.jsx)(Q,{type:"bottom"})]}),(0,y.jsx)(he,{})]})},ye="BurgerBuilder_root__M-A1J",Ce=()=>(0,y.jsx)("div",{className:ye,children:(0,y.jsxs)(s.W,{backend:n.PD,children:[(0,y.jsx)(q,{}),(0,y.jsx)(Ne,{})]})})}}]);
//# sourceMappingURL=751.46e8dc25.chunk.js.map