"use strict";(self.webpackChunkstellar_burgers=self.webpackChunkstellar_burgers||[]).push([[194],{2263:(e,t,s)=>{s.d(t,{B:()=>c});const r="ErrorMessage_root__kSKWw";var n=s(184);const c=e=>{let{children:t}=e;return(0,n.jsx)("p",{className:"".concat(r," text text_type_main-large text_color_inactive"),children:t})}},2646:(e,t,s)=>{s.r(t),s.d(t,{default:()=>Ne});var r=s(5287),n=s(6401),c=s(2791),i=s(335),a=s(9434),l=s(7963),o=s(1067),d=s(6814);const m="Modal_root__z7+I3",u="Modal_isOpen__zYv3o",p="Modal_container__Ha+Ky",x="Modal_closeButton__Ya+Ev";var _=s(184);const g=e=>{let{isOpen:t,onClose:s,onBackdropClick:r,children:n}=e;return(0,_.jsx)("div",{className:"".concat(m," ").concat(t?"".concat(u):""),onClick:r,children:(0,_.jsxs)("div",{className:"".concat(p," pt-25 pr-10 pb-25 pl-10"),children:[n,(0,_.jsx)("button",{className:x,type:"button","aria-label":"Close modal",onClick:s,children:(0,_.jsx)(d.Tw,{type:"primary"})})]})})};var j=s(7021);const h="NutritionFacts_root__RjsFs",b="NutritionFacts_image__p-fix",v="NutritionFacts_list__on7pF",N="NutritionFacts_listItem__ffIlj",y=e=>{let{ingredientId:t}=e;const s=(0,a.v9)((e=>(0,j.Vt)(e,t))),{name:r,calories:n,carbohydrates:c,fat:i,proteins:l,image_large:o}=s,d="mb-2 text text_type_main-default text_color_inactive",m="mb-2 text text_type_digits-default text_color_inactive";return(0,_.jsxs)("div",{className:h,children:[(0,_.jsx)("h2",{className:"text text_type_main-large",children:"Nutrition Facts"}),(0,_.jsx)("img",{className:"".concat(b," mt-4"),src:o,alt:r}),(0,_.jsx)("p",{className:"mt-4 text text_type_main-medium",children:r}),(0,_.jsxs)("dl",{className:v,children:[(0,_.jsxs)("div",{className:N,children:[(0,_.jsx)("dt",{className:d,children:"Calories"}),(0,_.jsx)("dd",{className:m,children:n})]}),(0,_.jsxs)("div",{className:N,children:[(0,_.jsx)("dt",{className:d,children:"Total Carb."}),(0,_.jsx)("dd",{className:m,children:c})]}),(0,_.jsxs)("div",{className:N,children:[(0,_.jsx)("dt",{className:d,children:"Total Fat"}),(0,_.jsx)("dd",{className:m,children:i})]}),(0,_.jsxs)("div",{className:N,children:[(0,_.jsx)("dt",{className:d,children:"Protein"}),(0,_.jsx)("dd",{className:m,children:l})]})]})]})},C=e=>{let{isOpen:t,onClose:s,onBackdropClick:r,ingredientId:n}=e;return(0,_.jsx)(g,{isOpen:t,onClose:s,onBackdropClick:r,children:(0,_.jsx)(y,{ingredientId:n})})};var f=s(6916);const k=(0,f.P1)((e=>e.burgerConstructor.fillings),(e=>Object.values(e))),B=e=>e.burgerConstructor.bun,I=(0,f.P1)([e=>[e.burgerConstructor.bun,...e.burgerConstructor.fillings],(e,t)=>t],((e,t)=>e.reduce(((e,s)=>(null===s||void 0===s?void 0:s._id)===t?e+("bun"===s.type?2:1):e),0)));var O=s(9215),M=s(3052),R=s(1042);const S=()=>{const e=(0,O.TL)(),[t,s]=(0,c.useState)(!1),r=()=>s(!1);return{isModalOpen:t,openModal:()=>s(!0),closeModal:r,closeByBackdropClick:e=>{e.target===e.currentTarget&&s(!1)},closeOrderConfirmationModal:()=>{e((0,R.QL)()),e((0,M.R5)()),r()},closeOrderErrorModal:()=>{e((0,R.Dq)()),r()}}},L="Ingredient_root__Zh74E",F="Ingredient_beingDragged__pJKPQ",T="Ingredient_name__bUorL",P="Ingredient_price__CIEQs",w=e=>{let{id:t}=e;const s=(0,a.v9)((e=>(0,j.Vt)(e,t))),{name:r,image:n,price:c}=s,i=(0,a.v9)((e=>I(e,t))),{isModalOpen:l,openModal:m,closeModal:u,closeByBackdropClick:p}=S(),[{beingDragged:x},g]=(0,o.c)({type:"ingredient",item:s,collect:e=>({beingDragged:e.isDragging()})});return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)("li",{ref:g,className:"".concat(L," ").concat(x?"".concat(F):""),onClick:m,children:[(0,_.jsx)("img",{className:"mr-4 ml-4",src:n,alt:r}),(0,_.jsxs)("div",{className:"pt-2",children:[(0,_.jsxs)("p",{className:"".concat(P," text text_type_digits-default"),children:[(0,_.jsx)("span",{className:"mr-2",children:c}),(0,_.jsx)(d.rm,{type:"primary"})]}),(0,_.jsx)("p",{className:"".concat(T," text text_type_main-default mt-2"),children:r})]}),i>0&&(0,_.jsx)(d.AT,{count:i,size:"default"})]}),l&&(0,_.jsx)(C,{isOpen:l,onClose:u,onBackdropClick:p,ingredientId:t})]})},D="IngredientList_root__1m0nr",U=e=>{let{ingredientIds:t}=e;return(0,_.jsx)("ul",{className:"".concat(D," pr-4 pb-10 pl-4"),children:t.map((e=>(0,_.jsx)(w,{id:e},e)))})},E="IngredientGroup_name__h7cBm",G=(0,c.forwardRef)(((e,t)=>{let{type:s}=e;const r=(0,a.v9)(j.pT),n=(0,a.v9)((e=>(0,j.e2)(e,s)));return r?(0,_.jsx)(l.a,{}):(0,_.jsxs)("li",{children:[(0,_.jsx)("h2",{ref:t,className:"".concat(E," text text_type_main-medium mb-6"),children:s}),(0,_.jsx)(U,{ingredientIds:n})]})})),z={BUNS:"BUNS",BURGERS:"BURGERS",TOPPINGS:"TOPPINGS"},H=e=>{if(0===e.length)return e;const t=e.toLowerCase();return t.charAt(0).toUpperCase()+t.slice(1)},Y="BurgerIngredients_tabBar__jn4fI",K="BurgerIngredients_menu__X3WWl",{BUNS:W,BURGERS:A,TOPPINGS:Q}=z,V=()=>{const[e,t]=(0,c.useState)(z.BUNS),s=(0,c.useRef)(null),r=(0,c.useRef)(null),n=(0,c.useRef)(null),a=(0,c.useRef)(null),l=e=>{e.current&&e.current.scrollIntoView({behavior:"smooth"})},o=e=>{switch(e){case W:l(r);break;case A:l(n);break;case Q:l(a)}};return(0,_.jsxs)("section",{className:"mt-10",children:[(0,_.jsx)("h1",{className:"text text_type_main-large",children:"Build Your Own Burger"}),(0,_.jsx)("ul",{className:"".concat(Y," mt-5"),children:Object.keys(z).map((t=>(0,_.jsx)("li",{children:(0,_.jsx)(i.Tab,{active:e===t,value:t,onClick:o,children:H(t)})},t)))}),(0,_.jsxs)("ul",{className:"".concat(K," custom-scroll"),ref:s,onScroll:()=>{var e;const c=null===(e=s.current)||void 0===e?void 0:e.getBoundingClientRect().y,i=Math.abs(r.current.getBoundingClientRect().y-c),l=Math.abs(n.current.getBoundingClientRect().y-c),o=Math.abs(a.current.getBoundingClientRect().y-c);i<l&&i<o&&t(W),l<i&&l<o&&t(A),o<i&&o<l&&t(Q)},children:[(0,_.jsx)(G,{type:"bun",ref:r}),(0,_.jsx)(G,{type:"burger",ref:n}),(0,_.jsx)(G,{type:"topping",ref:a})]})]})};var J=s(8422);const Z="BunElement_root__P2lJ4",X=e=>{let{type:t}=e;const s=(0,a.v9)(B);return(0,_.jsx)("div",{className:"".concat(Z," ml-8 pr-4"),children:(0,_.jsx)(d.DY,{type:t,text:s?"".concat(s.name," ").concat("top"===t?"(top)":"(bottom)"):"Choose your bun",price:s?s.price:0,thumbnail:s?s.image:"https://stellarburgers.nomoreparties.site/static/media/loading.89540200.svg",isLocked:!0})})};var q=s(2942);const $="FillingListItem_root__Kz4P+",ee="FillingListItem_isHovered__6iFKh",te=e=>{let{index:t,ingredient:s}=e;const r=(0,O.TL)(),{name:n,price:i,image:a}=s,[,l]=(0,o.c)({type:"addedIngredient",item:()=>({index:t})}),[{isHovered:m},u]=(0,J.L)({accept:"addedIngredient",collect:e=>({isHovered:e.isOver()}),drop:e=>{e.index!==t&&r((0,M.Dk)({fromIndex:e.index,toIndex:t}))}}),p=(0,c.useRef)(null);return l(u(p)),(0,_.jsxs)("li",{ref:p,className:"".concat($," ").concat(m?"".concat(ee):""," mt-4 mb-4"),children:[(0,_.jsx)(q.DragIcon,{type:"primary"}),(0,_.jsx)(d.DY,{text:n,thumbnail:a,price:i,handleClose:()=>r((0,M.sr)(t))})]})},se="FillingList_root__CWjeS",re=()=>{const e=(0,a.v9)(k);return(0,_.jsx)("ul",{className:"".concat(se," custom-scroll"),children:e.map(((e,t)=>(0,_.jsx)(te,{index:t,ingredient:e},e._id)))})};var ne=s(4865);const ce=e=>e.order,ie=e=>e.order.number,ae=s.p+"static/media/success.ffd5c56d9db3cece5522.png",le="OrderConfirmation_root__25rwU",oe="OrderConfirmation_orderNumber__h5AyN",de=()=>{const e=(0,a.v9)(ie);return(0,_.jsxs)("div",{className:le,children:[(0,_.jsx)("span",{className:"mb-8 text text_type_main-medium",children:"Your order number is"}),(0,_.jsx)("h2",{className:"".concat(oe," text text_type_digits-large"),children:e}),(0,_.jsx)("img",{className:"mt-15 mb-15",src:ae,alt:"Success icon"}),(0,_.jsx)("p",{className:"mb-2 text text_type_main-default",children:"your order is being prepared"}),(0,_.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"be ready to pick it up at the orbital station"})]})},me=e=>{let{isOpen:t,onClose:s,onBackdropClick:r}=e;return(0,_.jsx)(g,{isOpen:t,onClose:s,onBackdropClick:r,children:(0,_.jsx)(de,{})})};var ue=s(609);const pe="SubmitGroup_root__OQ4Lo",xe="SubmitGroup_button__68UXa";var _e=s(2263);const ge=()=>{const e=(0,O.TL)(),{isFetching:t,error:s}=(0,a.v9)(ce),r=(0,a.v9)(B),n=(0,a.v9)(k),{isModalOpen:i,openModal:o,closeOrderConfirmationModal:m,closeOrderErrorModal:u}=S(),p=(0,c.useMemo)((()=>r?2*r.price:0),[r])+(0,c.useMemo)((()=>n.reduce(((e,t)=>e+t.price),0)),[n]);return(0,_.jsx)(_.Fragment,{children:(0,_.jsxs)("div",{className:"".concat(pe," mt-10 pr-4 pl-4"),children:[(0,_.jsxs)("span",{className:"text text_type_digits-medium mr-10",children:[p," ",(0,_.jsx)(d.rm,{type:"primary"})]}),(0,_.jsxs)("div",{className:xe,children:[(0,_.jsx)(ne.z,{type:"button",view:"primary",size:"large",onClick:()=>{if(r&&n.length){const t=[r,...n,r].map((e=>e._id));e((0,ue.D)({ingredients:t})).then((()=>o()))}},disabled:!r||!n.length,children:"Place an order"}),t&&(0,_.jsx)(l.a,{})]}),!s&&i&&(0,_.jsx)(me,{isOpen:i,onClose:m,onBackdropClick:m}),s&&(0,_.jsx)(g,{isOpen:i,onClose:u,onBackdropClick:u,children:(0,_.jsx)(_e.B,{children:s})})]})})},je="BurgerConstructor_root__fVIgZ",he="BurgerConstructor_isHovered__i8Ijv",be=()=>{const e=(0,O.TL)(),[{isHovered:t},s]=(0,J.L)({accept:"ingredient",collect:e=>({isHovered:e.isOver()}),drop:e=>{r(e)}}),r=t=>{"bun"===t.type?e((0,M.zL)(t)):e((0,M.TZ)(t))};return(0,_.jsxs)("section",{className:"".concat(je," pt-25 pb-10"),children:[(0,_.jsxs)("div",{ref:s,className:t?"".concat(he):"",children:[(0,_.jsx)(X,{type:"top"}),(0,_.jsx)(re,{}),(0,_.jsx)(X,{type:"bottom"})]}),(0,_.jsx)(ge,{})]})},ve="BurgerBuilder_root__M-A1J",Ne=()=>(0,_.jsx)("div",{className:ve,children:(0,_.jsxs)(r.W,{backend:n.PD,children:[(0,_.jsx)(V,{}),(0,_.jsx)(be,{})]})})}}]);
//# sourceMappingURL=194.61032ea7.chunk.js.map